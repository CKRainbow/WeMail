<Window x:Class="WeMail.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:prism="http://prismlibrary.com/"
        xmlns:converter="clr-namespace:WeMail.Common.Converts;assembly=WeMail.Common"
        xmlns:materialDesing="http://materialdesigninxaml.net/winfx/xaml/themes"
        prism:ViewModelLocator.AutoWireViewModel="True"
        Style="{StaticResource MaterialDesignWindow}"
        WindowStyle="None" ResizeMode="NoResize" AllowsTransparency="True"
        FontFamily="Noto Sans SC"
        Title="{Binding Title}" Height="768" Width="1024" >
    <Window.Resources>
        <ResourceDictionary>
            <converter:ImageSourceConverter x:Key="ImgSrcConvert" />
            <Style x:Key="ModuleItemStyle" TargetType="ListBoxItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Grid Margin="5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="40" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Image Width="30" Height="30" Source="{Binding IconPath, Converter={StaticResource ImgSrcConvert}}" />
                                <TextBlock Grid.Column="1" Text="{Binding DisplayName}" HorizontalAlignment="Left" VerticalAlignment="Center" />
                            </Grid>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="1" />
            <ColumnDefinition Width="8*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="50" />
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid x:Name="GridTitle" Grid.Column="1" Grid.ColumnSpan="2" MouseLeftButtonDown="GridTitle_MouseLeftButtonDown" Background="Transparent" VerticalAlignment="Center">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Margin="0, 0, 5, 0" x:Name="BtnMin" Click="BtnMin_Click" Background="Transparent" BorderBrush="Transparent">_</Button>
                <Button Margin="0, 0, 5, 0" x:Name="BtnMax" Click="BtnMax_Click" Background="Transparent" BorderBrush="Transparent">□</Button>
                <Button Margin="0, 0, 5, 0" x:Name="BtnClose" Click="BtnClose_Click" Background="Transparent" BorderBrush="Transparent">x</Button>
            </StackPanel>
        </Grid>
        <Rectangle Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="3" VerticalAlignment="Bottom" Fill="White" Height="1" />
        <Grid HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Row="0" Grid.RowSpan="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Image Width="30" Height="30" Source="/WeMail.Resources;component/imgs/wemail_logo.png"/>

            <TextBlock Grid.Row="1" Text="{Binding Title}" Foreground="White" FontSize="25"/>
        </Grid>
        <ListBox Margin="10,10,0,0" Grid.Row="2" ItemsSource="{Binding Modules}" SelectedItem="{Binding CurrentModel}" ItemContainerStyle="{StaticResource ModuleItemStyle}"/>
        <Rectangle Grid.Column="1" Grid.Row="2" Grid.RowSpan="3" Width="1" Fill="White" />
        <ContentControl Grid.Row="2" Grid.Column="2" prism:RegionManager.RegionName="ContentRegion" />
        <materialDesing:PopupBox Grid.Column="2" Grid.Row="1" HorizontalAlignment="Right" Margin="0,0,10,0">
            <StackPanel>
                <Button Content="设置账号" Command="{Binding LoginCommand}"/>
            </StackPanel>
        </materialDesing:PopupBox>
    </Grid>
</Window>
